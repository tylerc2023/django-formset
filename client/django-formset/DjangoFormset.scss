@import "dropbox";
@import "dualselector";
@import "colors";

select::placeholder {
	color: rgb(128, 128, 128);
}
select.ts-hidden-accessible {
	display: none;
}

django-formset {
	$feedback-input-fields: 'input[type=email]:not(.dj-exempt-feedback)', 'input[type=text]:not(.dj-exempt-feedback)',
		'input[type=number]:not(.dj-exempt-feedback)', 'input[type=date]:not(.dj-exempt-feedback)';
	$feedback-fields: #{$feedback-input-fields}, 'select:not(.dj-exempt-feedback)', 'textarea:not(.dj-exempt-feedback)';

	.dj-errorlist {
		list-style: none;
		margin-top: 0;
		margin-bottom: 0;
		margin-left: 0;
		padding-left: 0;
		color: var(--django-formset-color-invalid);
	}

	&.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted) {
		#{$feedback-fields} {
			&:invalid:not(:focus) {
				border-color: var(--django-formset-color-invalid);
				background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="#{$django-formset-color-invalid}"><path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg>');
			}
		}
	}

	&.dj-feedback-warnings {
		django-field-group.dj-dirty:not(.dj-submitted) {
			#{$feedback-fields} {
				&:invalid:focus {
					background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="#{$django-formset-color-warning}"><path fill-rule="evenodd" d="M7.938 2.016a.146.146 0 0 0-.054.057L1.027 13.74a.176.176 0 0 0-.002.183c.016.03.037.05.054.06.015.01.034.017.066.017h13.713a.12.12 0 0 0 .066-.017.163.163 0 0 0 .055-.06.176.176 0 0 0-.003-.183L8.12 2.073a.146.146 0 0 0-.054-.057A.13.13 0 0 0 8.002 2a.13.13 0 0 0-.064.016zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/><path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/></svg>');
				}
			}
		}
		&:not(.dj-feedback-errors) {
			django-field-group.dj-dirty:not(.dj-submitted) {
				#{$feedback-fields} {
					&:invalid {
						background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="#{$django-formset-color-warning}"><path fill-rule="evenodd" d="M7.938 2.016a.146.146 0 0 0-.054.057L1.027 13.74a.176.176 0 0 0-.002.183c.016.03.037.05.054.06.015.01.034.017.066.017h13.713a.12.12 0 0 0 .066-.017.163.163 0 0 0 .055-.06.176.176 0 0 0-.003-.183L8.12 2.073a.146.146 0 0 0-.054-.057A.13.13 0 0 0 8.002 2a.13.13 0 0 0-.064.016zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/><path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/></svg>');
					}
				}
			}
		}
	}

	&.dj-feedback-success django-field-group {
		&.dj-dirty {
			#{$feedback-fields} {
				&:valid:not(:focus) {
					border-color: var(--django-formset-color-valid);
				}
			}
			#{$feedback-input-fields} {
				&:valid {
					background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="#{$django-formset-color-valid}"><path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/></svg>') !important;
				}
			}
		}
	}

	django-field-group {
		display: block;

		&[hidden] {
			display: none;
		}
		&.dj-required, &.dj-required-any {
			> label {
				font-weight: bolder;
			}
		}

		input {
			background-repeat: no-repeat !important;
			background-position: center right !important;
			background-origin: content-box !important;
		}

		select, textarea {
			background-image: none !important;
		}

		&.dj-submitted {
			#{$feedback-fields} {
				&:invalid {
					border-color: var(--django-formset-color-invalid);
					background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="#{$django-formset-color-invalid}"><path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg>');
					&:focus {
						box-shadow: 0 0 0 0.2rem var(--django-formset-shadow-invalid);
					}
				}
			}
		}

		.dj-help-text {
			font-style: oblique;
		}

		.dj-form-optgroup {
			margin-bottom: 0.5rem;
			> em {
				margin-left: 0.75rem;
			}
		}

		.dj-form-inlined {
			display: inline-block;
		}

		input[type="file"] {
			// `display: none;` causes Chrome to complain on calling `form.reportValidity()`.
			width: 0 !important;
			height: 0 !important;
		}

		&.dj-touched input[type="date"] {
			&::-webkit-calendar-picker-indicator {
				opacity: 0;
			}
		}

		.dj-control-panel {
			display: flex;
			> div {
				height: fit-content;
				margin-left: 0.5rem;
				progress {
					width: 100%;
					margin-top: 0.25rem;
				}
			}
		}
		@include Dropbox;
		@include DualSelector;
	}
}

.dj-button-decorator {
	vertical-align: inherit;
	line-height: initial;

	svg {
		vertical-align: initial;

		.path {
			stroke-dasharray: 1000;
			stroke-dashoffset: 0;
			&.circle {
				-webkit-animation: dash 0.9s ease-in-out;
				animation: dash 0.9s ease-in-out;
			}
			&.line {
				stroke-dashoffset: 1000;
				-webkit-animation: dash 0.9s 0.35s ease-in-out forwards;
				animation: dash 0.9s 0.35s ease-in-out forwards;
			}
			&.check {
				stroke-dashoffset: -100;
				-webkit-animation: dash-check 0.9s 0.35s ease-in-out forwards;
				animation: dash-check 0.9s 0.35s ease-in-out forwards;
			}
		}

		@-webkit-keyframes dash {
			0% {
				stroke-dashoffset: 1000;
			}
			100% {
				stroke-dashoffset: 0;
			}
		}

		@keyframes dash {
			0% {
				stroke-dashoffset: 1000;
			}
			100% {
				stroke-dashoffset: 0;
			}
		}

		@-webkit-keyframes dash-check {
			0% {
				stroke-dashoffset: -100;
			}
			100% {
				stroke-dashoffset: 900;
			}
		}

		@keyframes dash-check {
			0% {
				stroke-dashoffset: -100;
			}
			100% {
				stroke-dashoffset: 900;
			}
		}

	}

	@keyframes rotate {
		from {
			transform: rotate(0deg);
		}
		to {
			transform: rotate(360deg);
		}
	}

	.dj-icon {
		display: inline-block;
		width: 1em;
		height: 1em;
	}

	.dj-spinner {
		animation: rotate 1.5s infinite linear;
	}
}
